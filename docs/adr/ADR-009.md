# ADR-009: Using Blockchain for Event Sourcing Immutability

**Date**: 2025-11-25
**Status**: Proposed

## Context

The `PostOuCancer` application handles potentially sensitive data and processes. To ensure complete traceability, enhanced security, and absolute trust in the history of actions, it is necessary to make our event log (from event sourcing) immutable and tamper-proof.

The goal is to "set in stone" important application events so that we can prove that an event occurred at a specific time and has not been altered. This approach also lays the groundwork for future blockchain-based features, such as creating a native token.

## Decision

We will integrate a blockchain to "anchor" the events from our event sourcing architecture. The chosen platform is **Stratis/Cirrus**.

The implementation will be as follows:
1.  When an event is generated, it is first persisted in our primary data store (existing database).
2.  After persistence, a dedicated service will create a transaction on the Stratis/Cirrus blockchain. This transaction will contain proof of the event (e.g., its hash).
3.  The blockchain transaction ID will then be stored with the event in our database, creating an immutable link between our record and the blockchain.

This approach does not replace our current persistence system but enhances it with a decentralized layer of verifiability.

## Rationale

The choice of **Stratis/Cirrus** is driven by several key factors:

1.  **Native .NET Ecosystem**: Stratis is built entirely in C# on .NET, which aligns perfectly with our technology stack. Smart contract development is also done in C#, reducing the learning curve for the team.
2.  **Open Source and Proven Solution**: The platform is open source and has a strong community and documentation for .NET developers.
3.  **Gateway to the Future**: Stratis natively supports token creation and complex smart contracts, making it a strategic choice for our long-term vision (Phase 2: Exchange Token).
4.  **Alternative Considered**: Using `Nethereum` to interact with EVM-compatible blockchains (like Ethereum/Polygon) was considered. While very powerful, this option would introduce a dependency on an ecosystem (Solidity, EVM) less familiar to a .NET team, making it more complex to integrate natively.

## Consequences

### Positive
-   **Immutability**: The event log becomes tamper-proof.
-   **Auditability**: Security and compliance audits are greatly simplified.
-   **Technological Cohesion**: Stays within the C#/.NET ecosystem.
-   **Foundation for the Future**: Paves the way for tokenization.

### Negative
-   **New Dependency**: Introduction of a dependency on the Stratis ecosystem (SDK, nodes).
-   **Operational Complexity**: Need to manage the connection to a blockchain node.
-   **Transaction Costs**: Although minimal on a chain like Cirrus, each anchor will have a gas cost. A budget will need to be allocated.
-   **Research Phase**: A Proof of Concept (PoC) is essential to validate the technical approach before full integration.
